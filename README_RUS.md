# Telegram Bot на базе OpenAI

Этот проект представляет собой Telegram-бота, написанного на языке Python с использованием библиотеки aiogram 3. Он использует API OpenAI для генерации текстов и изображений, а также для работы с аудиосообщениями. Бот поддерживает несколько моделей OpenAI, таких как GPT-4.0 Omni и DALL·E 3, и позволяет пользователям взаимодействовать с ним через текстовые и голосовые сообщения.

## Установка и настройка

### Требования

- Python 3.8 или выше

### Установка
1. Скачайте или клонируйте репозиторий:
   ```sh
   git clone https://github.com/phenikstay/openai-telegram-bot.git
   cd openai-telegram-bot
   ```
   
2. Создайте директорию для аудио файлов:

   ```sh
   mkdir voice
   ```

3. Установите зависимости:

   ```sh
   pip install -r requirements.txt
   ```

### Настройка

1. Создайте файл `config.ini` в корневой папке проекта и добавьте следующие строки:

   ```ini
   [OpenAI]
   api_key = your_api_key

   [Telegram]
   token = your_token
   owner_id = your_user_id
   ```

   - `api_key`: ваш API ключ OpenAI.
   - `token`: токен вашего Telegram-бота.
   - `owner_id`: ваш User ID в Telegram, который будет иметь доступ к боту.

## Запуск

Запустите бота, выполнив следующую команду:

```sh
python main.py
```

## Функции

### Основные команды

- `/start`: Инициализирует модель GPT-4.0 Mini, выключает голосовой ответ, очищает контекст диалога, сбрасывает счетчик сообщений, удаляет системную роль, устанавливает качество и размер картинки.
- `/menu`: Открывает меню настроек.
- `/help`: Показать справку и инструкцию по использованию бота.

### Меню настроек

- **Выбор модели**:
   - GPT-4.0 Mini
   - GPT-4.0
   - DALL·E 3
   
- **Настройки картинки**:
   - Установка качества (SD/HD)
   - Установка размера (1024x1024, 1024x1792, 1792x1024)
   
- **Действия с контекстом**:
   - Показать текущий контекст
   - Очистить контекст
   
- **Голосовые ответы**:
   - Включить голосовой ответ
   - Выключить голосовой ответ

- **Системная роль**:
   - Назначить системную роль
   - Убрать системную роль

- **Информация**:
   - Показать информацию о состоянии бота

## Структура проекта

- `main.py`: Основной файл для запуска бота.
- `handler.py`: Обработчики для различных команд и сообщений.
- `classes.py`: Классы для работы с базой данных и хранения пользовательских данных.
- `base.py`: Функции для работы с базой данных.
- `middlewares.py`: Middleware для ограничения частоты запросов.
- `buttons.py`: Определяет кнопки и клавиатуры для взаимодействия с пользователем.
- `function.py`: Функции для обработки голосовых сообщений и обрезки длинных сообщений.
- `text.py`: Текстовые сообщения, используемые ботом.
- `config.ini`: Файл конфигурации для хранения токенов и ключей API.
- `requirements.txt`: Список зависимостей.

## Вклад и поддержка

Если вы нашли ошибку или у вас есть предложения по улучшению, пожалуйста, создайте issue или pull request в этом репозитории.

## Лицензия

Этот проект лицензирован под MIT License.
